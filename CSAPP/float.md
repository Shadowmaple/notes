# 浮点数表示

## 浮点数格式

一个浮点数由符号 s 、指数 E 和尾数 M 组成

格式：V = (-1) ^s^  × M × 2 ^E^

+   符号（sign）：(-1) ^s^ 表示符号位，当 s = 0，V 为正数；当 s = 1，V 为负数。
+   尾数（significand）：M 是一个二进制小数，表示有效数字，[ 1, 2 ) 或 [ 0, 1 )
+   阶码（exponent）：E 表示阶码位/指数位，反映浮点数的表示范围

划分为3个部分：

+   k 位阶码字段 exp 编码阶码E
+   n位小数字段为 frac 编码尾数 M

## 规格化

条件：

+   阶码 exp不全为 0 且不全为1
+   阶码采用偏移量移码：E = e - Bias
    +   e： 阶码字段的无符号数值
    +   偏移量Bias = 2 ^(k-1)^ - 1，k 为阶码的位数
        +   单精度：k=8，Bias=127（Exp：1 ~ 254， E：-126 ~ 127）
        +   双精度：k=11，Bias=1023（Exp：1 ~ 2046， E：-1022 ~ 1023）
+   尾数编码隐含先导数值1：M = 1.(frac）
    +   frac = 0000…0 (M = 1.0)时，为最小值
    +   frac = 111…1 (M = 2.0 - ε)时，为最大值

例：

将十进制数 20.59375 转换为 32位浮点数的二进制存储格式

```markdown
1. 转换为二进制数：20.59365 = 10100.10011
2. 移动小数点，变为标准浮点数：1.010010011 × 2^(4)
3. 由规格化浮点数可知 S = 0，M = 010010011，由 e = 4 可知阶码E = 4 + 127 = 131
4. S符号位为1位，阶码位为8位，尾数位为23位，因此二进制存储格式为：
	0100 0001 1010 0100 1100 0000 0000 0000
```



## 非规格化

条件：

+   阶码 exp 全为 0

+   阶码值：E = 2^0^ - Bias =  1 - Bias
+   尾数编码隐含先导数值0：M = 0.(frac）

当exp全为0且frac全为0时，表示0值，根据符号位的不同有+0和-0之分

## 特殊值

条件：阶码 exp 全为 1

有两种情况：

+   exp 全为1， frac 全为0：表示无穷，根据符号位不同又有 +∞ 和 -∞ 之分

+   exp 全为1，frac 不全为0：不是一个数 NAN（Not A Number）